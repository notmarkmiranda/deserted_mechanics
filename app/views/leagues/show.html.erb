<div>
  <% if policy(@league).edit? %>
    <h2>League controls</h2>
    <div>
      <%= link_to "Edit League", edit_league_path %>
      <%= button_to "Delete League", league_path(@league), method: :delete%>
      <%= link_to "Invite new player", new_league_membership_path(@league) %>
    </div>

    <h2>Game controls</h2>
    <div>
      <%= link_to "Schedule Game", new_league_game_path(@league) %>
    </div>
  <% end %>
</div>
<h1><%= @league.name %></h1>
<div>Location: <%= @league.location %></div>
<div class="season-games">
  <h2>Season Games</h2>
  <% @league.season_games.each do |game| %>
    <li><%= link_to game.date, game %></li>
  <% end %>
</div>
<div class="seasons-list">
  <h3>Seasons: <%= @league.seasons_count %></h3>
  <table class="u-full-width">
    <thead>
      <tr>
        <th>#</th>
        <th>Winner / Current Leader</th>
        <th>Start Date</th>
        <th>End Date</th>
        <th># of Games</th>
      </tr>
    </thead>
    <tbody>
      <% @league.seasons.decorate.each.with_index(1) do |season, index| %>
      <tr>
        <td><%= index %></td>
        <td><%= season.winner %></td>
        <td><%= season.start_date %></td>
        <td><%= season.end_date %></td>
        <td><%= season.games_count %></td>
      </tr>
      <% end %>
    </tbody>
  </table>
</div>
<div>
  <%= link_to "Members: #{@league.memberships_count}", league_memberships_path(@league) %>
</div>
